name: CI Pipeline Demo   # ‡∏ä‡∏∑‡πà‡∏≠ workflow

# üîπ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ workflow ‡∏£‡∏±‡∏ô
on:
  push:                  # trigger ‡πÄ‡∏°‡∏∑‡πà‡∏≠ push ‡πÇ‡∏Ñ‡πâ‡∏î
    branches: [ main ]   # ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ branch main
  pull_request:
    branches: [ main ]   # ‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ PR ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
  workflow_dispatch:
# üîπ ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ (Jobs)
jobs:
  build:
    runs-on: ubuntu-latest  # OS ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ô (Linux)

    steps:
      # Step 1: Checkout ‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏≤‡∏Å repo
      - name: Checkout code
        uses: actions/checkout@v4

      # Step 2: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 20
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      # Step 3: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
      - name: Install dependencies
        run: npm ci

      # Step 4: ‡∏£‡∏±‡∏ô test
      - name: Run tests
        run: npm test

      # Step 5: Build project
      - name: Build project
        run: npm run build

      # Step 6: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏£‡∏∏‡∏õ
      - name: Print success message
        run: echo "üéâ Build and Test succeeded!"
